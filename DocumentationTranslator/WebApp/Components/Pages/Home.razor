@page "/"
@using System.Text.Json
@inject NavigationManager NavigationManager
@rendermode InteractiveServer
@attribute [StreamRendering]

<PageTitle>DONDE ESTA LA BIBLIOTECA!!!</PageTitle>
<div class="mainDiv">
	<div class="inputDiv">
		<div class="smallContainer">
			<h2>Upload a file!</h2>
			<InputFile OnChange="HandleFileSelected" />
			<label> Select input langauge:</label>
			<select name="inputLanguage">
				<option value="1">One</option>
				<option value="2">Two</option>
				<option value="3">Three</option>
			</select>

			<label> Select output langauge:</label>
			<select name="outputLanguage">
				<option value="1">One</option>
				<option value="2">Two</option>
				<option value="3">Three</option>
			</select>
			<p></p>
			<button>Translate</button>
		</div>

		<div class="smallContainer">
			<h2>View a file!</h2>
			<label> Select the file you want to view:</label>
			<select name="userFile">
				<option value="1">One</option>
				<option value="2">Two</option>
				<option value="3">Three</option>
			</select>
			<button>View file</button>
		</div>
	</div>

	<div class="viewDiv">
		<h4>File Content:</h4>
		<pre>@fileContent</pre>
	</div>
</div>

@code {
	private async Task HandleFileSelected(InputFileChangeEventArgs e)
	{
		var file = e.GetMultipleFiles().FirstOrDefault();

		if(file != null)
		{
			var fileStream = file.OpenReadStream();
			using var reader = new StreamReader(fileStream);
			var contents = await reader.ReadToEndAsync();

			// Update UI using InvokeAsync
			await InvokeAsync(() =>
			{
				fileContent = contents;
			});
		}
	}
}